<!-- <nb-card [hidden]="!exerciceBoolean">
  <nb-card-body>
    <div class="note note-info">
      <div class="note-title">Note</div>
      <div class="note-body">
        <ul>
          <li>
            Données non trouvées
          </li>
          <li>
            acune grande livre géneral à affichée .
          </li>
          <li>
            s'il vous plaît ouvrire un exercice.
          </li>
        </ul>
      </div>
    </div>
  </nb-card-body>
</nb-card> -->
<nb-card [hidden]="exerciceBoolean">
  <nb-card-header>


   
    <!-- <h4 class="text-center">
      Exercice: {{exercice.designation}}-{{exercice.annee}}
    </h4> -->

    <ngx-titre-exercice></ngx-titre-exercice>
  </nb-card-header>

  <div class="row">

       

      <div class="col-sm-2">
        <div class="form-group">
          <label for="inputFirstName" class="label">  </label>
          <input nbInput class="form-control" [nbDatepicker]="date1"  style="padding: 3.3%;" fieldSize="small"  [(ngModel)]="grandLivre.date1"
          placeholder="   Date début" name="date1" />
        <nb-datepicker #date1></nb-datepicker>
        </div>
      </div>
      <div class="col-sm-2">
        <div class="form-group">
          <label for="inputLastName" class="label">  </label>
          <input nbInput class="form-control" [nbDatepicker]="date2"  style="padding: 3.3%;"  fieldSize="small" [(ngModel)]="grandLivre.date2"
          placeholder="Date Fin" name="date2" />
        <nb-datepicker #date2></nb-datepicker>
        </div>
      </div>

      <div class="col-sm-3">
          <div class="form-group">
            <label for="inputLastName" class="label">  </label>
            <ng-select placeholder="Choisir..." [items]="comptes" bindLabel="nameCode" bindValue="codeCompte"
            style="width: 100%;" [(ngModel)]="grandLivre.codeCompte">
          </ng-select>
          </div>
        </div>

        <div class="col-sm-1">
            <div class="form-group">
              <label for="inputLastName" class="label">    </label>
              <ng-select placeholder="classe" [items]="classes" [(ngModel)]="grandLivre.classe"
              style="    width: 100%;">
            </ng-select>
            </div>
          </div>

          <div class="col-sm-2">
             
              <div class="input-group input-group-sm"  style="margin-top: 8%;">
                  <button style="height: 1%" class="btn btn-warning btn-sm" type="button" (click)="filterByDate()">
                    <i class="fa fa-search"></i>
                  </button>
                  <button class="btn btn-info btn-sm" type="button" (click)="refresh()"
                    style="background-color: tomato;height: 1%">
                    <i class="fas fa-sync"></i>
                  </button>
    
    
                </div>
    
               
                   

                     

         </div>
                

         <div style="margin-top: 1%;" class="col-md-1 offset-md-1">
      
            <button  (click)="exportToExcel()" nbButton shape="round" size="small" status="success"> <i size="3%" class="nb-arrow-thin-down"> XLSX</i></button>
          
          
          </div>
        
                
                
                  
              </div>
             
     

  <!-- <div class="note note-info" *ngIf="dataNotFound()">
    <div class="note-title">Note</div>
    <div class="note-body">
      <ul>
        <li>
          Données non trouvées
        </li>
        <li>
          acune Grand Livre Géneral à affichée .
        </li>
      </ul>
    </div>
  </div> -->


  <div *ngIf="!dataNotFound()">
    <nb-card-body *ngFor="let  plan of  plans;let j = index; let k = count">
      <div *ngIf="plan.operationEcritures.length!=0">
        <table class="table table-striped table-bordered" style="margin-left: 2%; width: 95%">
          <thead>
            <tr>
              <th scope="col">Compte comptable</th>
              <th scope="col">Journal</th>
              <th scope="col">N°écriture/libellé</th>
              <th scope="col">Date écriture</th>
              <th scope="col">N°Pièce</th>
              <th scope="col">Débit</th>
              <th scope="col">Crédit</th>
              <th scope="col">Cumulé</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let  operation of plan.operationEcritures; let i = index; let c = count">
              <td style="width: 25%">{{plan.codeCompte}} :{{plan.nameCompte}} </td>
              <td style="width: 10%">{{operation.ecriture.journal.designation}} </td>
              <td style="width: 10%">{{operation.ecriture.numeroEcriture}}-{{operation.ecriture.libelle}} </td>
              <td style="width: 10%">{{operation.ecriture.date}}</td>
              <td style="width: 5%">{{operation.ecriture.numeroPiece}}</td>
              <td style="width: 10%"> {{operation.debit | transformeNumber }}</td>
              <td style="width: 10%">{{operation.credit | transformeNumber }}</td>
              <td style="width: 10%">{{operation.debit-operation.credit | transformeNumber  }}</td>



            </tr>
          </tbody>

          <tfoot style="background-color: #D3D3D3;">
            <td style="width: 25%"> TOTAUX : ({{plan.codeCompte}}) :{{plan.nameCompte}} - {{   getEtatCompte(j)}}</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td>{{getTotolDebit(j) | transformeNumber }}</td>
            <td>{{getTotolCredit(j) | transformeNumber }}</td>
            <td>{{  getCumule(j) | transformeNumber  }}</td>

          </tfoot>

        </table>



      </div>

    </nb-card-body>
  </div>
</nb-card>