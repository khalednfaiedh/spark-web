<div class="col-md-12 col-lg-12" style="width:1350px; height: 750px">
  <div class="row">
    <div class="col-lg-12" style="width:1350px; height: 650px">
      <nb-card>
        <nb-card-body>

          <nb-tabset fullWidth>
            <nb-tab tabTitle="Devis">
              <nb-card-body>
                <div class="row full-name-inputs">
                  <div class="form-group col-md-4 col-lg-4 input-group-sm">
                    <label _ngcontent-udb-c31="" class="label">Status de devis :</label>
                    <ng-select placeholder="Status" [(ngModel)]="devis.statusDevis">
                      <ng-option value='Etabli'>Etabli</ng-option>
                      <ng-option value='Non établi'>Non établi</ng-option>
                      <ng-option value='En attente de validation'>En attente de validation </ng-option>
                      <ng-option value='Accepté par le client'>Accepté par le client</ng-option>
                      <ng-option value='En attente de réponse client'>En attente de réponse client</ng-option>
                      <ng-option value='En cours de négociation client'>En cours de négociation client</ng-option>
                      <ng-option value='Refusé par le client'>Refusé par le client</ng-option>
                    </ng-select>
                  </div>
                  <div class="form-group col-md-4 col-lg-4 input-group-sm">
                    <label _ngcontent-udb-c31="" class="label">Emise par :</label>
                    <input type="text" name="emisepar" class="form-control" placeholder="Emise par"
                      [(ngModel)]="devis.emisepar" />

                  </div>

                  <div class="form-group col-md-4 col-lg-4 input-group-sm">
                    <label _ngcontent-udb-c31="" class="label">Validité de devis(Jours) :</label>
                    <input type="number" name="finValidite" class="form-control" placeholder="Validité de devis"
                      [(ngModel)]="devis.validite_devis" />
                  </div>
                  <div class="form-group col-md-4 col-lg-4 input-group-sm">
                    <label _ngcontent-udb-c31="" class="label">Date de livraison :</label>
                    <input class="form-control" name="dateLivraison" [(ngModel)]="devis.date_livraison"
                      placeholder="Date de livraison" [nbDatepicker]="dateLivraison" />
                    <nb-datepicker #dateLivraison>
                    </nb-datepicker>
                  </div>

                  <div class="form-group col-md-4 col-lg-4 input-group-sm">
                    <label _ngcontent-udb-c31="" class="label">Mode de paiement:</label>
                    <ng-select name="modePaiement" placeholder="Mode de paiement" [appendTo]="'body'"
                      [items]="modesPaiements" style="width:100%;" bindLabel="typePaiement"
                      [(ngModel)]="modePaiementDevis">
                    </ng-select>
                  </div>


                  <div class="form-group col-md-4 col-lg-4 input-group-sm">
                    <label _ngcontent-udb-c31="" class="label">Type de paiements :</label>
                    <ng-select name="condition " placeholder="Type de paiement" [(ngModel)]="devis.typePaiement">
                      <ng-option value="Date fixe"> Date fixe</ng-option>
                      <ng-option value="Par période">Par période</ng-option>
                    </ng-select>
                  </div>

                </div>
                <div *ngIf="devis.typePaiement=='Date fixe'">
                  <div [hidden]="false">
                    <div class="row full-name-inputs">
                      <div class="form-group col-md-3 col-lg-3 input-group-sm">
                        <label _ngcontent-udb-c31="" class="label">Date de paiement :</label>
                        <input name="datePaiement" placeholder="Date de paiement" class="form-control"
                          [(ngModel)]="devis.datePaiement" type="date" />

                      </div>

                    </div>
                  </div>

                </div>

                <div *ngIf="devis.typePaiement=='Par période'">
                  <div [hidden]="false">
                    <div class="row full-name-inputs">
                      <div class="form-group col-md-4 col-lg-4 input-group-sm">
                        <label _ngcontent-udb-c31="" class="label"> Stratégie de paiement :</label>
                        <ng-select placeholder="Stratégie de paiement" [(ngModel)]="starategiePaiement"
                          (change)="getListConditionPaiementParStragie()">
                          <ng-option value="Fixation en pourcentage">Fixation en pourcentage</ng-option>
                          <ng-option value="Fixation en jours">Fixation en jours</ng-option>
                        </ng-select>
                      </div>
                      <div class="form-group col-md-8 col-lg-8 input-group-sm">
                        <label _ngcontent-udb-c31="" class="label"> Condition de paiement :</label>
                        <ng-select name="conditionPaiements2" placeholder="Echéance de paiement" [appendTo]="'body'"
                          [items]="conditionPaiements" style="width:100%;" bindLabel="listCondition"
                          [(ngModel)]="conditionPaiementDevis" (change)="calculeAvance()">
                        </ng-select>
                      </div>
                    </div>
                  </div>
                </div>
                <!--<div class="form-group col-md-4 col-lg-4 input-group-sm">
                        <label _ngcontent-udb-c31="" class="label">Délais de paiements
                          :</label>
                        <ng-select name="option2 " placeholder="Délais de paiement"
                          [(ngModel)]="echeancePaiementDevis.option">
                          <ng-option value="A la date de facturation">A la date de facturation</ng-option>
                          <ng-option value="A la date de commande">A la date de commande</ng-option>
                          <ng-option value="A la date de livraison">A la date de livraison</ng-option>
                        </ng-select>
                      </div>-->
                <div *ngIf="starategiePaiement=='Fixation en pourcentage'">
                  <div [hidden]="false">
                    <div class="row full-name-inputs">
                      <div class="form-group col-md-3 col-lg-3 input-group-sm">
                        <label _ngcontent-udb-c31="" class="label">Montant({{monnaie}}) :</label>
                        <input type="text" placeholder="Echéance de paiement" class="form-control"
                          [(ngModel)]="devis.sommeFinale" currencyMask
                          [options]="{ prefix: '', thousands: thousands, decimal: decimal,precision: precision, align:'left'}"
                          disabled>
                      </div>


                      <div class="form-group col-md-3 col-lg-3 input-group-sm">
                        <label _ngcontent-udb-c31="" class="label">Avance({{monnaie}}) :</label>
                        <input type="text" name="montant" placeholder="Echéance de paiement" class="form-control"
                          [(ngModel)]="devis.avance" currencyMask
                          [options]="{ prefix: '', thousands: thousands, decimal: decimal,precision: precision, align:'left'}"
                          disabled>
                      </div>
                    </div>
                  </div>
                </div>
                <div *ngIf="starategiePaiement=='Fixation en jours'">
                  <div [hidden]="false">
                    <div class="row full-name-inputs">

                      <div class="form-group col-md-3 col-lg-3 input-group-sm">
                        <label _ngcontent-udb-c31="" class="label">Montant({{monnaie}}) :</label>
                        <input type="number" name="montant" placeholder="Montant" class="form-control"
                          [(ngModel)]="devis.sommeFinale">
                      </div>


                      <div class="form-group col-md-3 col-lg-3 input-group-sm">
                        <label _ngcontent-udb-c31="" class="label">Avance({{monnaie}}) :</label>
                        <input type="number" name="avance" placeholder="Echéance de paiement" class="form-control"
                          [(ngModel)]="devis.avance">
                      </div>


                      <!-- <div class="form-group col-md-2 col-lg-2 input-group-sm">
                        <label _ngcontent-udb-c31="" class="label">nombre jour / Période :</label>
                        <input type="number" name="nbJour" placeholder="Echéance de paiement" class="form-control"
                          [(ngModel)]="devis.numberJourByEcheance">
                      </div>-->
                    </div>
                  </div>
                </div>
                <!--<div *ngIf="echeancePaiementDevis.typeMontant=='Montant variable'">
                  <div [hidden]="false">
                    <form action="" style="width:100%;" [formGroup]="listEcheanceForm">
                      <div class="col">
                        <div class="row" formArrayName="listeEcheance">
                          <div class="col-md-12 col-lg-12"
                            *ngFor="let group of listeEcheanceArray.controls; let i = index;" [formGroupName]="i">
                            <div class="row">
                              <div class="col-12">
                                <div class="row">
                                  <div class="col-8">
                                    <label>Echéance de paiements {{i+1}} :</label>
                                  </div>
                                  <div class="col-4 control-buttons">
                                    <img src="/assets/images/add.svg" alt="" (click)="addEcheance()">
                                    <img src="/assets/images/remove.svg" alt="" width="24" height="24"
                                      (click)="removeEcheance(i)">
                                  </div>
                                </div>
                                <hr>
                              </div>
                              ({{(ep.rate * ep.percentage)/100 }}) [(rate)]="ep.rate"

                              <div class="col-12">
                                <div class="row">
                                  <div class="col">
                                    <div class="form-group col-md-3 col-lg-6 input-group-sm">
                                      <label _ngcontent-udb-c31="" class="label">Date de paiement :</label>
                                      <input formControlName="datePaiement" placeholder="Date de paiement"
                                        class="form-control" [nbDatepicker]="dateEcheancePaiement" i18n="@@startdate" />
                                      <nb-datepicker (dateChange)="test($event)" #dateEcheancePaiement>
                                      </nb-datepicker>
                                    </div>
                                  </div>

                                  <div class="col">
                                    <div class="form-group col-md-3 col-lg-6 input-group-sm">
                                      <label _ngcontent-udb-c31="" class="label">Montant :</label>
                                      <input type="number" formControlName="montant" class="form-control">
                                    </div>
                                  </div>

                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col">
                            <hr>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>-->

              </nb-card-body>



              <nb-card>
                <nb-card-body>
                  <ng2-smart-table [settings]="settings" [source]="source" (editConfirm)="show($event)"
                    (deleteConfirm)="onDeleteConfirm($event)">
                  </ng2-smart-table>
                </nb-card-body>
                <nb-card-body>
                  <div class="row full-name-inputs" style="margin-left: 50%;">

                    <div class="form-group col-md-7 col-lg-7 input-group-sm">
                      <label _ngcontent-udb-c31="" class="label">Prix HT :</label>
                      <input type="text" name="sommeTotaleHt" placeholder="Prix HT" class="form-control"
                        [ngModel]="devis.sommeTotaleHt" disabled currencyMask style="border: 2px solid orange;
                        border-radius: 4px;"
                        [options]="{ prefix: '', thousands: thousands, decimal: decimal,precision: precision, align:'left'}" />

                    </div>

                    <div class="form-group col-md-5 col-lg-5 input-group-sm">
                      <label _ngcontent-udb-c31="" class="label">Remise(%) :</label>
                      <input type="number" name="remise" placeholder="Remise" class="form-control"
                        [(ngModel)]="devis.remise" (click)="calculTotaleavecRemise()" />
                    </div>
                  </div>


                  <div class="row full-name-inputs" style="margin-left: 50%;">
                    <div class="form-group col-md-7 col-lg-7 input-group-sm">
                      <label _ngcontent-udb-c31="" class="label">Prix net HT :</label>
                      <input type="text" name="sommeRemise" placeholder="Prix net HT" class="form-control"
                        [(ngModel)]="devis.sommeRemise" currencyMask disabled style="border: 2px solid orange;
                        border-radius: 4px;"
                        [options]="{ prefix: '', thousands: thousands, decimal: decimal,precision: precision, align:'left'}" />
                    </div>
                    <div class="form-group col-md-5 col-lg-5 input-group-sm">
                      <label _ngcontent-udb-c31="" class="label">Prix TVA :</label>
                      <input type="text" placeholder="Prix TVA" class="form-control" name="sommeTVA"
                        [(ngModel)]="devis.sommeTVA" currencyMask style="border: 2px solid orange;
                        border-radius: 4px;" disabled
                        [options]="{ prefix: '', thousands: thousands, decimal: decimal,precision: precision, align:'left'}" />
                    </div>


                  </div>
                  <div class=" row full-name-inputs" style="margin-left: 50%;">
                    <div class="form-group col-md-12 col-lg-12 input-group-sm">
                      <label _ngcontent-udb-c31="" class="label">Prix TTC :</label>
                      <input type="text" name="sommeTotaleavecTVA" placeholder="Prix TTC" class="form-control"
                        [(ngModel)]="devis.sommeTotaleavecTVA" disabled currencyMask style="border: 2px solid orange;
                        border-radius: 4px;"
                        [options]="{ prefix: '', thousands: thousands, decimal: decimal,precision: precision, align:'left'}" />
                    </div>

                  </div>

                  <div class="row full-name-inputs" style="margin-left: 50%;">
                    <div class="form-group col-md-7 col-lg-7 input-group-sm">
                      <label _ngcontent-udb-c31="" class="label">Frais livraison :</label>

                      <input type="text" name="fraislivraison" placeholder="Frais livraison " class="form-control"
                        [(ngModel)]="devis.fraislivraison" currencyMask
                        [options]="{ prefix: '', thousands: thousands, decimal: decimal,precision: precision, align:'left'}" />
                    </div>
                    <div class="form-group col-md-5 col-lg-5 input-group-sm">
                      <label _ngcontent-udb-c31="" class="label">Autre frais :</label>

                      <input type="text" name="autrefrais" placeholder="Autre frais" class="form-control"
                        [(ngModel)]="devis.autrefrais" currencyMask
                        [options]="{ prefix: '', thousands: thousands, decimal: decimal,precision: precision, align:'left'}" />
                    </div>
                  </div>
                  <div class="d-flex justify-content-between">
                    <nb-card-body>
                      <div class="row full-name-inputs">
                        <label _ngcontent-udb-c31="" class="label"> Observations :</label>
                        <div class="form-group col-md-10 col-lg-10 input-group-sm">
                          <textarea class="form-control" style="min-height:200%;"
                            [(ngModel)]="devis.commentaire"></textarea>
                        </div>
                      </div>
                    </nb-card-body>
                    <nb-card-body>
                      <div class="row full-name-inputs">
                        <div class="form-group col-md-9 col-lg-9 input-group-sm">
                          <label _ngcontent-udb-c31="" class="label">Montant à payer :</label>
                          <input type="text" name="sommeFinale" placeholder="Montant à payer" class="form-control"
                            [(ngModel)]="devis.sommeFinale" currencyMask style="border: 2px solid orange;
                            border-radius: 4px;" disabled
                            [options]="{ prefix: '', thousands: thousands, decimal: decimal,precision: precision, align:'left'}" />
                        </div>
                        <div class="form-group col-md-3 col-lg-3 input-group-sm">
                          <label _ngcontent-udb-c31="" class="label">Monnaie :</label>

                          <input name="devise" class="form-control" style="width:100%;" [(ngModel)]="monnaie" />

                        </div>
                      </div>

                      <div class="row full-name-inputs">
                        <div class="form-group col-md-9 col-lg-9 input-group-sm">
                          <label _ngcontent-udb-c31="" class="label">Montant à payer en lettre :</label>
                          <input type="text" name="sommeFinale" placeholder="Montant à payer en lettre"
                            class="form-control" [(ngModel)]="devis.sommeFinaleLettre"
                            (click)="NumberToLetter(devis.sommeFinale)" />
                        </div>
                        <div class="form-group col-md-3 col-lg-3 input-group-sm">
                          <label _ngcontent-udb-c31="" class="label">Monnaie :</label>

                          <input name="devise" placeholder="Monnaie" class="form-control" value="{{monnaie}}" />
                        </div>
                      </div>
                    </nb-card-body>
                  </div>
                </nb-card-body>

              </nb-card>
            </nb-tab>
            <nb-tab tabTitle="Demande de prix client">
              <ngx-show-numerique-demande-prix-client></ngx-show-numerique-demande-prix-client>
            </nb-tab>

          </nb-tabset>
        </nb-card-body>
      </nb-card>

      <div style="text-align:right;">
        <button nbButton style="cursor: pointer;margin: 0.5rem;align-content: center;" status="success"
          (click)="onAddRCM() ">{{ARCM}}</button>
        <button (click)="onclose()" nbButton status="danger"
          style="cursor: pointer;margin: 0.5rem;align-content: center;">Annuler</button>
      </div>
    </div>
  </div>
</div>